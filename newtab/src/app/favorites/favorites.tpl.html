<section class="favorites-view" ng-controller="favoritesCtrl">
    <div class="favorites">
        <ul class="categories"> <!--ng-repeat="cateory in sites track by category.id"-->
            <li class="category" ng-repeat="category in currentSites track by category.guid">
                <h2 id="{{category.id}}">
                    <span class="title">{{category.name}}</span>
                    <a class="btn edit" ng-if="category.type!='recommend'"
                       ng-click="process.showEditCategory(category)">edit</a>
                    <a class="btn delete" ng-if="category.type!='recommend'"
                       ng-click="process.showDeleteCategory(category.id,category.name)">delete</a>
                </h2>
                <ul class="sites">
                    <li class="item-wrap" ng-repeat=" item in category.items track by item.guid">
                        <div class="item">
                            <a class="info" ng-style="{'background-image':item.icon}" ng-href="{{item.url}}"
                               target="_self">
                                <div class="icon" ng-style="{'background-color':item.bgColor || '#ddd'}">
                                    <img class="img" ng-if="item.icon" ng-src="{{item.icon}}"
                                         src="/resource/icons/s.gif" />
                                    <span class="letter" ng-style="{'color':item.color||'#fff'}" ng-if="!item.icon">{{item.letter | uppercase}}</span>

                                    <div class="btn edit"
                                         ng-if="category.type!='recommend'"
                                         ng-click="process.showEditFavorite(category,item,$event,$index);">edit
                                    </div>
                                    <div class="btn delete"
                                         ng-if="category.type!='recommend'"
                                         ng-click="process.deleteFavorite(category,item,$event,$index);">delete
                                    </div>
                                </div>
                                <div class="details">
                                    <span class="title" title="{{item.title}}">{{item.title}}<br></span>
                                    <span class="url" title="{{item.url}}">{{item.url}}</span>
                                </div>
                            </a>

                            <div class="hover-mode" ng-if="!1">
                                <a class="screenshot">
                                    <div class="preview">
                                        无背景提示
                                    </div>
                                </a>

                                <div class="actions">
                                    <div class="btn edit"></div>
                                    <div class="btn delete"></div>
                                </div>
                            </div>
                        </div>
                    </li>
                    <li class="item-wrap add-item-wrap" ng-if="category.type!='recommend'">
                        <a class="item-cnt" ng-click="process.showEditFavorite(category,'',$event)">
                            <div class="item">
                                <div class="add-icon"></div>
                                <div class="add-title">Add Item</div>
                            </div>
                        </a>
                    </li>
                </ul>
            </li>
        </ul>
    </div>
    <div class="favorites-bar">
        <div class="categories" id="favorite_categories">
            <a ng-click="process.goCategory(category)" class="item"
               ng-repeat="category in recommend track by category.guid">{{category.name}}</a>
            <a ng-click="process.goCategory(category)" class="item"
               ng-repeat="category in categories track by category.guid">{{category.name}}</a>
            <a class="insert-category" ng-click="process.showEditCategory()">+</a>
        </div>
        <!--<div class="sys-menu">-->
            <!--<a ng-click="process.chromeMenu()">Chrome</a>-->
            <!--<a ng-click="process.recentlyClosed()">最近关闭</a>-->
        <!--</div>-->
    </div>
    <!--<div class="chrome_menu recently-closed" ng-show="showChromeRecentlyClosed">-->
        <!--<ul>-->
            <!--<li ng-click="process.chromeMenuClick(item)" class="item" ng-repeat=" item in chromeRecentlyClosed">-->
                <!--<span>{{item.text}}</span>-->
            <!--</li>-->
        <!--</ul>-->
    <!--</div>-->

    <modal-dialog show='modalShownDeleteCategory' dialog-title="{{dialogTitle}}">
        <div class="category-delete-wrap">
            <p class="desc" ng-bind-html="updateCategoryInfo.deleteMsg"></p>

            <div class="opt">
                <div class="btn-1" ng-click="process.confirmDeleteCategory('yes')">Yes</div>
                <div class="btn" ng-click="process.confirmDeleteCategory('cancel')">cancel</div>
            </div>
        </div>
    </modal-dialog>
    <modal-dialog show='modalShownCategory' width='500px' dialog-title='{{dialogTitle}}'>
        <form ng-submit="process.updateCategory()">
            <div class="form-data">
                <div class="data-wrap">
                    <div class="ipt-item">
                        <!--<label>Name</label>-->
                        <div class="ipt-wrap">
                            <input class="left ipt-1 designed-input" type="text" ng-model="updateCategoryInfo.name"
                                   placeholder="Name">
                        </div>
                    </div>
                </div>
                <div class="form-opt">
                    <input type="submit" value="Save" class="btn-1 save-btn disabled" />
                </div>
            </div>
        </form>
    </modal-dialog>
    <modal-dialog show='modalShownFavorite' width='500px' dialog-title='{{dialogTitle}}'>
        <form ng-submit="process.updateFavorite()">
            <div class="circle left"><span class="circle-cell"></span></div>
            <div class="form-data">
                <div class="data-wrap">
                    <div class="ipt-item">
                        <div class="ipt-wrap">
                            <input class="designed-input ipt-1" type="url" ng-model="editFavoriteInfo.url"
                                   placeholder="URL"
                                   autofocus="autofocus" required>
                        </div>
                    </div>
                    <div class="ipt-item">
                        <div class="ipt-wrap">
                            <input class="left designed-input ipt-1" type="text" ng-model="editFavoriteInfo.title"
                                   placeholder="Title">
                        </div>
                    </div>
                    <div class="ipt-item" ng-if="editFavoriteInfo.id">
                        <div class="ipt-wrap">
                            <select ng-model="editFavoriteInfo.parentId" class="ipt-1">
                                <option value="{{category.id}}"
                                        ng-repeat="category in categories track by category.guid">{{category.name}}
                                </option>
                            </select>
                        </div>
                    </div>
                    <div class="ipt-item select-color-wrap">
                        <div class="ipt-wrap">
                            <span class="select-color" ng-class="{active:colorSelectIdx == $index}"
                                  ng-repeat="color in defaultColors" ng-click="process.colorClick($index)"
                                  ng-style="{'background-color':color}">{{colorSelectIdx}}{{color}}</span>
                        </div>
                    </div>
                </div>
                <div class="form-opt">
                    <input type="submit" value="Save" class="btn-1 disabled" />
                </div>
            </div>
        </form>
    </modal-dialog>
</section>