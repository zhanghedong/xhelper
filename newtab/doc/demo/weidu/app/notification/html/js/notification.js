var ui_locale=chrome.i18n.getMessage("@@ui_locale");var officialDomain="newtabplus.com";if(ui_locale=='zh_CN'){officialDomain="weidunewtab.com"}var notificationID=window.location.hash.replace("#","");if(notificationID==""){var _setup=JSON.parse(localStorage.getItem("setup"));var notificationID=typeof _setup["notificationID"]=="undefined"?0:_setup["notificationID"]}var notificationUrl="http://hao."+officialDomain+"/myapp/notification/data/notification.php?notificationID="+notificationID+"&ui_locale="+ui_locale+"&t="+new Date().getTime();$(function(){$(".notificationContainer").bind("mouseover",function(e){if(!isMouseMoveContains(e,this)){if(typeof chrome.extension.sendMessage=="function"){chrome.extension.sendMessage({"model":"notification","act":"mouseEnter"})}else{chrome.extension.sendRequest({"model":"notification","act":"mouseEnter"})}}});$(".notificationContainer").bind("mouseout",function(e){if(!isMouseMoveContains(e,this)){if(typeof chrome.extension.sendMessage=="function"){chrome.extension.sendMessage({"model":"notification","act":"mouseLeaver"})}else{chrome.extension.sendRequest({"model":"notification","act":"mouseLeaver"})}}});$.ajax({url:notificationUrl,success:function(data){if(data){data=JSON.parse(data);if(data.title){$(".notificationTitle").html(data.title);$(".notificationTitle").show()}else{$(".notificationTitle").hide()}if(data.content){$(".notificationContent").html(data.content)}}else{if(typeof chrome.extension.sendMessage=="function"){chrome.extension.sendMessage({"model":"notification","act":"close"})}else{chrome.extension.sendRequest({"model":"notification","act":"close"})}}},error:function(){}})});function isMouseMoveContains(e,parent){var child=e.relatedTarget?e.relatedTarget:e.type=='mouseout'?e.toElement:e.fromElement;while(child&&child!=parent){child=child.parentNode}return(child==parent)}